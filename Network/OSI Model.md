Модель OSI (ISO/OSI) - это модель функционирования сети. Модель включает в себя 7 уровней, каждый из которых абстрагирован от других и ничего не знает о их существовании. Каждый уровень несёт в себе какое-то количество информации. Часть этой информации является служебной для этого уровня - например, IP-адрес сайта не несёт никакой полезной нагрузки. Полезная же нагрузка переносится в той части уровня, который называется protocol data unit - *PDU*.
## Уровни Модели OSI

**1 уровень. Физический (physical)**. Единицей нагрузки (PDU) здесь является бит. Кроме единиц и нулей физический уровень не знает ничего. На физическом уровне определяются физические (механические, электрические, оптические) характеристики линий связи. На этом уровне работают провода, патч панели, сетевые концентраторы (хабы, которые сейчас уже сложно найти в привычных нам сетях), сетевые адаптеры. Именно сетевые адаптеры и ничего более из компьютера. Сам сетевой адаптер принимает последовательность бит и передаёт её дальше. В качестве примера можно привести обозначения:
- `Serial` - телефонная линия
- `UTP` - медный кабель

**2 уровень. Канальный (data link)**. PDU - кадр ([[IEEE 802 Frame]]). На этом уровне появляется адресация. Адресом является [[MAC Address|MAC адрес]]. Канальный уровень определяет правила использования физического уровня узлами сети и ответственен за доставку кадров адресату и их целостность. Адресация второго уровня работает только в пределах одного сетевого сегмента и ничего не знает о маршрутизации - этим занимается вышестоящий уровень. Соответственно, устройства, работающие на L2 - коммутаторы, мосты и драйвер сетевого адаптера. Протоколы: [Ethernet](https://ru.wikipedia.org/wiki/Ethernet) (IEEE 802.3), [[PPP]]. *Wi-Fi* (IEEE 802.11) и *Bluetooth* (IEEE 802.15.1) тоже работают на этом уровне. ^OSI-L2

**3 уровень. Сетевой (network)**. PDU - пакет ([[L3 Packet|packet]]). Уровень отвечает за адресацию и доставку сообщений. [IP](https://ru.wikipedia.org/wiki/IP) здесь вытеснил всех реальных конкурентов (IPX, AppleTalk); в качестве возможной альтернативы сегодня рассматривается [[SCION]]. Адресация в IP происходит по IP-адресам, которые состоят из 32 битов. Протокол маршрутизируемый, то есть пакет способен попасть в любую часть сети через какое-то количество маршрутизаторов. Служебные протоколы 3 уровня: [[ICMP & IGMP]]. На L3 работают маршрутизаторы. ^OSI-L3

**4 уровень. Транспортный (transport)**. PDU - сегмент (segment)/датаграмма (datagram). Уровень контролирует установку соединения и очерёдность прохождения компонентов сообщения. На этом уровне появляются понятия портов. Протоколы этого уровня ([[TCP & UDP]]) отвечают за прямую связь между приложениями и за надёжность доставки информации. [[TCP]] умеет запрашивать повтор передачи данных в случае, если данные приняты неверно или не все, может менять скорость передачи данных, если сторона приёма не успевает принять всё (TCP Window Size).

*Следующие уровни “правильно” реализованы лишь в RFC. На практике же протоколы, описанные на следующих уровнях, работают одновременно на нескольких уровнях модели OSI, поэтому нет чёткого разделения на сеансовый и представительский уровни. В связи с этим в настоящее время основным используемым стеком является TCP/IP. PDU для всех 3 уровней - данные (data).*

**5 уровень. Сеансовый (session)**. Управляет сеансом связи, обменом информации, правами, координирует связь между двумя прикладными программами, работающими на разных рабочих станциях. Протоколы, организовывающие сессию и управляющие ей на этом уровне - [[PPTP]] (примитивно) и [[L2TP]] (полноценно), также *OpenVPN* и *WireGuard*, *SSH* и *IKE* (Internet Key Exchange, часть *IPsec*)

**6 уровень. Представительский (presentation)**. PDU данные (data). Представление и шифрование данных, служит для преобразования данных из внутреннего формата компьютера в формат передачи. **JPEG**, **ASCII**, **MPEG**. Пример протокола - [[TLS]] (хотя он также выполняет и сеансовые функции: установление защищённого канала, управление ключами, восстановление сессии.)

**7 уровень. Прикладной (application)**. PDU данные (data). Самый многочисленный и разнообразный уровень, является пограничным между прикладной программой и другими уровнями, обеспечивая удобный интерфейс связи для сетевых программ пользователя. На нем выполняются все высокоуровневые протоколы, такие как **POP**, **SMTP**, **FTP**, **RDP** (Remote Desktop Protocol), **[[HTTP]]** и т. д. Протоколы здесь не должны задумываться о маршрутизации или гарантии доставки информации - этим занимаются нижестоящие уровни. На 7 уровне необходима лишь реализация конкретных действий, например, отправка сообщения конкретному адресату или его получение.
### TCP/IP

Стек протоколов TCP/IP включает в себя четыре уровня:
- Канальный уровень (Network Access Layer) - объединяет в себе 1–2 уровни OSI.
- Сетевой уровень (Internet Layer).
- Транспортный уровень (Transport Layer).
- Прикладной уровень (Application Layer) – объединяет в себе 5–7 уровни OSI.

Протоколы этих уровней полностью реализуют функциональные возможности модели OSI.
[https://docs.oracle.com/javase/tutorial/networking/sockets/definition.html](https://docs.oracle.com/javase/tutorial/networking/sockets/definition.html)
[https://www.baeldung.com/a-guide-to-java-sockets](https://www.baeldung.com/a-guide-to-java-sockets)
