**DHCP (Dynamic Host Configuration Protocol)** — это протокол, который автоматически выдаёт IP-адреса и другие сетевые параметры устройствам в сети. Реализован в каждом роутере, но в крупных [[IPv4]] сетях может быть и standalone сервером.

Без DHCP пришлось бы вручную прописывать IP, маску, шлюз, DNS на каждом устройстве. DHCP автоматизирует это:
- Выдаёт уникальный IP в сети.
- Сообщает маску подсети, адрес шлюза, DNS-серверы, время аренды.
- Может выдавать доп. параметры (NTP-сервер, PXE-boot и др.).

Алгоритм работы известен как *DORA* (Discovery → Offer → Request → Acknowledgment):
1. **DHCPDISCOVER** - Клиент не знает, какой у него IP. Шлёт *broadcast* запрос на  `255.255.255.255:67` (67 [[TCP & UDP#^UDP|UDP]] порт зарезервирован для этих целей. Для клиента зарезервирован порт 68).
2. **DHCPOFFER** - Сервер отвечает айпишником, маской подсети, шлюзом (*default gateway*, устройство, через которое происходит выход во внешнюю сеть) и сроком аренды.
3. **DHCPREQUEST** - Клиент подтверждает выбор, делая *broadcast*, чтобы все DHCP сервера знали, что этот адрес занят.
4. **DHCPACK** - Подтверждение от сервера, после которого клиент уже настраивает стек TCP/IP.

DHCP выдаёт адрес на время (*lease time*). Перед истечением срока клиент пытается продлить аренду (**DHCPREQUEST** → **DHCPACK**). Если не удалось, адрес освобождается и может выдаваться другим.

Домашний роутер соединяет в себе и DHCP, и шлюз, и [[NAT]].
